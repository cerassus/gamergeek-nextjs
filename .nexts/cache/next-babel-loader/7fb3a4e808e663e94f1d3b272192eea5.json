{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/cerassus/Websites/gamergeek-nextjs/components/main/challenge/Table.js\";\nimport Table from \"../../styled-components/Table\";\nimport Typography from \"../../styled-components/Typography\";\nimport React from \"react\";\nimport { pickRandomGame } from \"../../../global/fetch\";\nimport { game_database } from \"../../../global/const\";\nimport moment from 'moment';\nexport default function TableComponent({\n  random_game,\n  startGame,\n  startLoading,\n  endGame,\n  showRandomGame,\n  pushNewAnswer,\n  showHint,\n  hideHint,\n  game_status,\n  showGamePreparePopup,\n  showGameSummary,\n  difficultyFromPopup\n}) {\n  const [answerTimeStart, setAnswerTimeStart] = React.useState(false);\n  const [hintCounter, setHintCounter] = React.useState(0);\n  const [hints, setHints] = React.useState(false); // const [allowSummary, setAllowSummary] = React.useState(true)   redux\n\n  const stop = () => {\n    hideHint();\n    setHintCounter(0);\n    endGame();\n  };\n\n  const start = async difficulty => {\n    difficulty && startGame(difficulty);\n    startLoading();\n    hideHint();\n    setHintCounter(0);\n    showRandomGame(await pickRandomGame(game_database));\n  };\n\n  const checkAnswer = async answer => {\n    const answerTimeEnd = moment();\n    const user_answer = answer === random_game.name ? {\n      title: random_game.name,\n      time: answerTimeEnd.diff(answerTimeStart),\n      score: Number((1000 / answerTimeEnd.diff(answerTimeStart) * 10000 * ((10 - hintCounter) / 10)).toFixed()),\n      correct: true,\n      hints_used: hintCounter\n    } : {\n      title: random_game.name,\n      time: answerTimeEnd.diff(answerTimeStart),\n      score: 0,\n      correct: false,\n      skip: answer === \"player_skipped_game\" ? true : false,\n      hints_used: hintCounter\n    };\n    pushNewAnswer(user_answer);\n    start();\n  };\n\n  const getHint = () => {\n    showHint(...hints.splice(Math.floor(Math.random() * hints.length), 1));\n    setHintCounter(hintCounter + 1);\n  };\n\n  React.useEffect(() => {\n    !game_status.isLoading && setAnswerTimeStart(moment());\n    !game_status.isStarted && showGameSummary(true);\n  }, [game_status]);\n  React.useEffect(() => {\n    random_game && setHints(random_game.hints);\n  }, [random_game]);\n  React.useEffect(() => {\n    if (difficultyFromPopup) {\n      start(difficultyFromPopup);\n      showGamePreparePopup(false);\n    }\n  }, [difficultyFromPopup]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      top: true,\n      children: !game_status.isStarted ? /*#__PURE__*/_jsxDEV(Typography, {\n        link: true,\n        onClick: () => showGamePreparePopup(true),\n        children: \"start a new challenge\"\n      }, \"key0015\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this) : game_status.isLoading ? /*#__PURE__*/_jsxDEV(Typography, {\n        link: true,\n        children: \"loading\"\n      }, 'key0016', false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 12\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [hintCounter < 3 && /*#__PURE__*/_jsxDEV(Typography, {\n          link: true,\n          onClick: () => getHint(),\n          children: \"get a hint\"\n        }, \"key0011\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          link: true,\n          onClick: () => checkAnswer(\"player_skipped_game\"),\n          children: \"skip\"\n        }, \"key0012\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          link: true,\n          onClick: stop,\n          children: \"quit\"\n        }, \"key0013\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      bottom: true,\n      children: game_status.isStarted && !game_status.isLoading && random_game.answers ? random_game.answers.map((answer, i) => /*#__PURE__*/_jsxDEV(Typography, {\n        answer: true,\n        onClick: answer => checkAnswer(answer.target.innerText),\n        children: answer\n      }, \"key0021\" + i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)) : ``\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["/home/cerassus/Websites/gamergeek-nextjs/components/main/challenge/Table.js"],"names":["Table","Typography","React","pickRandomGame","game_database","moment","TableComponent","random_game","startGame","startLoading","endGame","showRandomGame","pushNewAnswer","showHint","hideHint","game_status","showGamePreparePopup","showGameSummary","difficultyFromPopup","answerTimeStart","setAnswerTimeStart","useState","hintCounter","setHintCounter","hints","setHints","stop","start","difficulty","checkAnswer","answer","answerTimeEnd","user_answer","name","title","time","diff","score","Number","toFixed","correct","hints_used","skip","getHint","splice","Math","floor","random","length","useEffect","isLoading","isStarted","answers","map","i","target","innerText"],"mappings":"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","sourcesContent":["import Table from \"../../styled-components/Table\";\nimport Typography from \"../../styled-components/Typography\";\nimport React from \"react\";\nimport { pickRandomGame } from \"../../../global/fetch\";\nimport { game_database } from \"../../../global/const\";\nimport moment from 'moment'\n\nexport default function TableComponent({\n  random_game,\n  startGame,\n  startLoading,\n  endGame,\n  showRandomGame,\n  pushNewAnswer,\n  showHint,\n  hideHint,\n  game_status,\n  showGamePreparePopup,\n  showGameSummary,\n  difficultyFromPopup\n}) {\n  const [answerTimeStart, setAnswerTimeStart] = React.useState(false)\n  const [hintCounter, setHintCounter] = React.useState(0)\n  const [hints, setHints] = React.useState(false)\n  // const [allowSummary, setAllowSummary] = React.useState(true)   redux\n  const stop = () => {\n    hideHint()\n    setHintCounter(0)\n    endGame()\n  };\n  const start = async (difficulty) => {\n    difficulty && startGame(difficulty)\n    startLoading()\n    hideHint()\n    setHintCounter(0)\n    showRandomGame(await pickRandomGame(game_database))\n  };\n  const checkAnswer = async (answer) => {\n    const answerTimeEnd = moment()\n    const user_answer =\n      answer === random_game.name\n        ? {\n            title: random_game.name,\n            time: answerTimeEnd.diff(answerTimeStart),\n            score: Number((1000/answerTimeEnd.diff(answerTimeStart)*10000*((10-hintCounter)/10)).toFixed()),\n            correct: true,\n            hints_used: hintCounter,\n          }\n        : {\n            title: random_game.name,\n            time: answerTimeEnd.diff(answerTimeStart),\n            score: 0,\n            correct: false,\n            skip: answer === \"player_skipped_game\" ? true: false,\n            hints_used: hintCounter,\n          };\n    pushNewAnswer(user_answer)\n    start()\n  }\n  const getHint = () => {\n    showHint(...hints.splice(Math.floor(Math.random() * hints.length), 1))\n    setHintCounter(hintCounter + 1)\n  }\n  React.useEffect(() => {\n    !game_status.isLoading && setAnswerTimeStart(moment())\n    !game_status.isStarted && showGameSummary(true)\n  }, [game_status])\n\n  React.useEffect(() => {\n    random_game && setHints(random_game.hints) \n  }, [random_game])\n\n  React.useEffect(() => {\n    if(difficultyFromPopup) {\n      start(difficultyFromPopup)\n      showGamePreparePopup(false)\n    } \n  }, [difficultyFromPopup])\n\n  return (\n    <>\n      <Table top>    \n        {!game_status.isStarted ?\n          <Typography key={\"key0015\"} link onClick={() => showGamePreparePopup(true)}>start a new challenge</Typography>\n          : game_status.isLoading ?\n           <Typography key={'key0016'} link>loading</Typography>\n           : (\n            <>\n              {hintCounter < 3 && <Typography key={\"key0011\"} link onClick={() => getHint()}>get a hint</Typography>}\n              <Typography key={\"key0012\"} link onClick={() => checkAnswer(\"player_skipped_game\")}>skip</Typography>\n              <Typography key={\"key0013\"} link onClick={stop}>quit</Typography>\n            </>\n          )}\n      </Table>\n      <Table bottom>\n        {(game_status.isStarted && !game_status.isLoading && random_game.answers) ?\n        random_game.answers.map((answer, i) => (\n        <Typography key={\"key0021\"+i} answer onClick={(answer) => checkAnswer(answer.target.innerText)}>{answer}</Typography>))\n        : ``}\n      </Table>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}