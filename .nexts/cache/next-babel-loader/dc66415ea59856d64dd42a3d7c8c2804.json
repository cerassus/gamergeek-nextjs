{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/cerassus/Websites/gamergeek-nextjs/components/main/challenge/Table.js\",\n    _s = $RefreshSig$();\n\nimport Table from \"../../styled-components/Table\";\nimport Typography from \"../../styled-components/Typography\";\nimport { useState, useEffect, Fragment } from \"react\";\nimport { getGameDetails, fetchNewGameDatabase } from \"../../../global/fetch\";\nimport moment from 'moment';\nimport * as SC from \"../../styled-components/Popup\";\nvar game_difficulty = [\"easy\", \"medium\", \"hard\"];\nexport default function TableComponent(_ref) {\n  _s();\n\n  var _this = this;\n\n  var random_game = _ref.random_game,\n      startGame = _ref.startGame,\n      startLoading = _ref.startLoading,\n      endGame = _ref.endGame,\n      user_score = _ref.user_score,\n      clearUserScore = _ref.clearUserScore,\n      newGameDatabase = _ref.newGameDatabase,\n      showRandomGame = _ref.showRandomGame,\n      pushNewAnswer = _ref.pushNewAnswer,\n      showHint = _ref.showHint,\n      clearHint = _ref.clearHint,\n      game_status = _ref.game_status,\n      game_database = _ref.game_database,\n      removeItemFromDatabase = _ref.removeItemFromDatabase;\n\n  var _useState = useState(false),\n      answerTimeStart = _useState[0],\n      setAnswerTimeStart = _useState[1];\n\n  var _useState2 = useState(0),\n      hintCounter = _useState2[0],\n      setHintCounter = _useState2[1];\n\n  var _useState3 = useState(false),\n      hints = _useState3[0],\n      setHints = _useState3[1];\n\n  var _useState4 = useState(false),\n      difficulty = _useState4[0],\n      setDifficulty = _useState4[1];\n\n  var _useState5 = useState(true),\n      usernamePanel = _useState5[0],\n      showUsernamePanel = _useState5[1];\n\n  var _useState6 = useState(false),\n      warning = _useState6[0],\n      setWarning = _useState6[1];\n\n  var _useState7 = useState(false),\n      popup = _useState7[0],\n      switchPopup = _useState7[1];\n\n  var _useState8 = useState(false),\n      summary = _useState8[0],\n      showSummary = _useState8[1];\n\n  var _useState9 = useState(false),\n      username = _useState9[0],\n      setUsername = _useState9[1];\n\n  var startNewGame = function startNewGame() {\n    switchPopup(true);\n  };\n\n  var loadNewQuestion = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var randomIndex;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              randomIndex = Math.floor(Math.random() * game_database.length);\n              !game_status.isLoading && startLoading();\n              clearHint();\n              setHintCounter(0);\n\n              if (!(game_database === 0)) {\n                _context.next = 8;\n                break;\n              }\n\n              endGame();\n              _context.next = 14;\n              break;\n\n            case 8:\n              _context.t0 = showRandomGame;\n              _context.next = 11;\n              return getGameDetails(game_database[randomIndex]);\n\n            case 11:\n              _context.t1 = _context.sent;\n              (0, _context.t0)(_context.t1);\n              removeItemFromDatabase(randomIndex);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function loadNewQuestion() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getNewDatabase = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              startLoading();\n              _context2.t0 = newGameDatabase;\n              _context2.next = 4;\n              return fetchNewGameDatabase(difficulty - 1);\n\n            case 4:\n              _context2.t1 = _context2.sent;\n              (0, _context2.t0)(_context2.t1);\n              _context2.next = 8;\n              return loadNewQuestion();\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getNewDatabase() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var quitGame = function quitGame() {\n    clearHint();\n    setHintCounter(0);\n    setHints(false);\n    showUsernamePanel(true);\n    setDifficulty(false);\n    setUsername(false);\n    setAnswerTimeStart(false);\n    switchPopup(false);\n    user_score.length > 0 && showSummary(true);\n  };\n\n  var getHint = function getHint() {\n    showHint.apply(void 0, _toConsumableArray(hints.splice(Math.floor(Math.random() * hints.length), 1)));\n    setHintCounter(function (hintCounter) {\n      return hintCounter + 1;\n    });\n  };\n\n  var handleTyping = function handleTyping(e) {\n    0 < e.target.value.length && e.target.value.length < 3 ? setWarning(true) : setWarning(false); // check if username doesn't match one of usernames in MongoDatabase\n\n    setUsername(e.target.value);\n  };\n\n  var validateUserName = function validateUserName() {\n    warning || !username ? alert('Wrong username! Try different one!') : showUsernamePanel(false);\n  };\n\n  var close_summary = function close_summary() {\n    showSummary(false);\n    clearUserScore();\n  };\n\n  var checkAnswer = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(answer) {\n      var answerTimeEnd, user_answer;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              answerTimeEnd = moment();\n              user_answer = answer === random_game.name ? {\n                title: random_game.name,\n                time: answerTimeEnd.diff(answerTimeStart),\n                score: Number((1000 / answerTimeEnd.diff(answerTimeStart) * 10000 * ((10 - hintCounter) / 10)).toFixed()),\n                correct: true,\n                hints_used: hintCounter\n              } : {\n                title: random_game.name,\n                time: answerTimeEnd.diff(answerTimeStart),\n                score: 0,\n                correct: false,\n                skip: answer === \"player_skipped_game\" ? true : false,\n                hints_used: hintCounter\n              };\n              pushNewAnswer(user_answer);\n              loadNewQuestion();\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function checkAnswer(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    !game_status.isLoading && setAnswerTimeStart(moment());\n    !game_status.isStarted && quitGame();\n  }, [game_status]);\n  useEffect(function () {\n    random_game && setHints(random_game.hints);\n  }, [random_game]);\n  useEffect(function () {\n    if (difficulty) {\n      switchPopup(false);\n      startGame();\n      getNewDatabase();\n    }\n  }, [difficulty]);\n  useEffect(function () {\n    game_database.length === 120 && loadNewQuestion();\n  }, [game_database]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      top: true,\n      children: !game_status.isStarted ? /*#__PURE__*/_jsxDEV(Typography, {\n        link: true,\n        onClick: function onClick() {\n          return startNewGame();\n        },\n        children: \"start a new challenge\"\n      }, \"key0015\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this) : game_status.isLoading ? /*#__PURE__*/_jsxDEV(Typography, {\n        link: true,\n        children: \"loading\"\n      }, 'key0016', false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 12\n      }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [hintCounter < 3 && /*#__PURE__*/_jsxDEV(Typography, {\n          link: true,\n          onClick: function onClick() {\n            return getHint();\n          },\n          children: \"get a hint\"\n        }, \"key0011\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          link: true,\n          onClick: function onClick() {\n            return checkAnswer(\"player_skipped_game\");\n          },\n          children: \"skip\"\n        }, \"key0012\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          link: true,\n          onClick: function onClick() {\n            return endGame();\n          },\n          children: \"quit\"\n        }, \"key0013\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      bottom: true,\n      children: game_status.isStarted && !game_status.isLoading && random_game.answers ? random_game.answers.map(function (answer, i) {\n        return /*#__PURE__*/_jsxDEV(Typography, {\n          answer: true,\n          onClick: function onClick(answer) {\n            return checkAnswer(answer.target.innerText);\n          },\n          children: answer\n        }, \"key0021\" + i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }, _this);\n      }) : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SC.Popup, {\n      title: \"Hello gamergeek!\",\n      switch_popup: popup,\n      popupIsClosed: function popupIsClosed() {\n        return quitGame();\n      },\n      children: usernamePanel ? /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(SC.WelcomeText, {\n          children: \"Let\\u2019s see how good you are! Starting from your name...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(SC.TextInput, {\n          type: \"text\",\n          onChange: function onChange(e) {\n            return handleTyping(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(SC.TextInputHint, {\n          visible: warning,\n          children: \"Wrong nickname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(SC.PlayButton, {\n          onClick: function onClick() {\n            return validateUserName();\n          },\n          children: \"Let's Play!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(SC.WelcomeText, {\n          center: true,\n          children: \"Set game difficulty...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 15\n        }, this), game_difficulty.map(function (diff_lvl, i) {\n          return /*#__PURE__*/_jsxDEV(SC.PlayButton, {\n            onClick: function onClick() {\n              return setDifficulty(i + 1);\n            },\n            children: diff_lvl\n          }, \"key0011\" + i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 17\n          }, _this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SC.Popup, {\n      title: \"Summary\",\n      switch_popup: summary,\n      popupIsClosed: function popupIsClosed() {\n        return close_summary();\n      },\n      children: user_score.length > 0 && summary && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          width: \"95%\",\n          padding: \"2rem 0\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"50%\",\n            margin: \"1rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(SC.WelcomeText, {\n            children: \"The Game\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(SC.TD, {\n                children: \"Correct answers:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SC.TD, {\n                children: user_score.filter(function (x) {\n                  return x.correct;\n                }).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(SC.TD, {\n                children: \"Wrong answers:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SC.TD, {\n                children: user_score.filter(function (x) {\n                  return !x.correct;\n                }).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(SC.TD, {\n                children: \"Skipped answers:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SC.TD, {\n                children: user_score.filter(function (x) {\n                  return x.skip;\n                }).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(SC.TD, {\n                children: \"Hints used:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SC.TD, {\n                children: user_score.map(function (x) {\n                  return x = x.hints_used;\n                }).reduce(function (acc, y) {\n                  return acc + y;\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(SC.TD, {\n                children: \"Quickest response:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SC.TD, {\n                children: user_score.map(function (x) {\n                  return x = x.time;\n                }).sort(function (a, b) {\n                  return a - b;\n                })[0] / 1000 + \" sec\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(SC.TD, {\n                children: \"Slowest response:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SC.TD, {\n                children: user_score.map(function (x) {\n                  return x = x.time;\n                }).sort(function (a, b) {\n                  return a - b;\n                })[user_score.length - 1] / 1000 + \" sec\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(SC.TD, {\n                children: \"Average time response:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SC.TD, {\n                children: (user_score.map(function (x) {\n                  return x = x.time;\n                }).reduce(function (acc, x) {\n                  return acc + x;\n                }) / user_score.length / 1000).toFixed(3) + \" sec\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"50%\",\n            margin: \"1rem\",\n            position: \"relative\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(SC.WelcomeText, {\n            children: \"Score:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SC.ScoreText, {\n            children: [user_score.map(function (score) {\n              return score = score.score;\n            }).reduce(function (acc, score) {\n              return acc + score;\n            }).toLocaleString(), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"points\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 128\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SC.PlayButton, {\n            summary: true,\n            onClick: function onClick() {\n              return close_summary();\n            },\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TableComponent, \"ouHJ03Y9N5w59DNMa+Tv798KL1U=\");\n\n_c = TableComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"TableComponent\");","map":{"version":3,"sources":["/home/cerassus/Websites/gamergeek-nextjs/components/main/challenge/Table.js"],"names":["Table","Typography","useState","useEffect","Fragment","getGameDetails","fetchNewGameDatabase","moment","SC","game_difficulty","TableComponent","random_game","startGame","startLoading","endGame","user_score","clearUserScore","newGameDatabase","showRandomGame","pushNewAnswer","showHint","clearHint","game_status","game_database","removeItemFromDatabase","answerTimeStart","setAnswerTimeStart","hintCounter","setHintCounter","hints","setHints","difficulty","setDifficulty","usernamePanel","showUsernamePanel","warning","setWarning","popup","switchPopup","summary","showSummary","username","setUsername","startNewGame","loadNewQuestion","randomIndex","Math","floor","random","length","isLoading","getNewDatabase","quitGame","getHint","splice","handleTyping","e","target","value","validateUserName","alert","close_summary","checkAnswer","answer","answerTimeEnd","user_answer","name","title","time","diff","score","Number","toFixed","correct","hints_used","skip","isStarted","answers","map","i","innerText","diff_lvl","display","width","padding","justifyContent","margin","filter","x","reduce","acc","y","sort","a","b","position","toLocaleString"],"mappings":"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","sourcesContent":["import Table from \"../../styled-components/Table\";\nimport Typography from \"../../styled-components/Typography\";\nimport { useState, useEffect, Fragment } from \"react\";\nimport { getGameDetails, fetchNewGameDatabase  } from \"../../../global/fetch\";\nimport moment from 'moment'\nimport * as SC from \"../../styled-components/Popup\"\n\nconst game_difficulty = [\"easy\", \"medium\", \"hard\"];\n\nexport default function TableComponent({\n    random_game, startGame, startLoading, endGame, user_score, clearUserScore, newGameDatabase,\n    showRandomGame, pushNewAnswer, showHint, clearHint, game_status, game_database, removeItemFromDatabase }) {\n  const [answerTimeStart, setAnswerTimeStart] = useState(false)\n  const [hintCounter, setHintCounter] = useState(0)\n  const [hints, setHints] = useState(false)\n  const [difficulty, setDifficulty] = useState(false)\n  const [usernamePanel, showUsernamePanel] = useState(true)\n  const [warning, setWarning] = useState(false)\n  const [popup, switchPopup] = useState(false)\n  const [summary, showSummary] = useState(false)\n  const [username, setUsername] = useState(false)\n\n  const startNewGame = () => {\n    switchPopup(true)\n  }\n  const loadNewQuestion = async () => {\n    const randomIndex = Math.floor(Math.random() * game_database.length)\n    !game_status.isLoading && startLoading()\n    clearHint()\n    setHintCounter(0)\n    if(game_database === 0) {\n      endGame() \n    } else {\n      showRandomGame(await getGameDetails(game_database[randomIndex]))\n      removeItemFromDatabase(randomIndex)\n    }\n  } \n  const getNewDatabase = async () => {\n    startLoading()\n    newGameDatabase(await fetchNewGameDatabase(difficulty-1))\n    await loadNewQuestion()\n  }\n  const quitGame = () => {\n    clearHint()\n    setHintCounter(0)\n    setHints(false)\n    showUsernamePanel(true)\n    setDifficulty(false)\n    setUsername(false)\n    setAnswerTimeStart(false)\n    switchPopup(false)\n    user_score.length > 0 && showSummary(true)\n  }\n  const getHint = () => {\n    showHint(...hints.splice(Math.floor(Math.random() * hints.length), 1))\n    setHintCounter(hintCounter => hintCounter + 1)\n  }\n  const handleTyping = (e) => {\n    (0 < e.target.value.length && e.target.value.length < 3) \n      ? setWarning(true)\n      : setWarning(false);   // check if username doesn't match one of usernames in MongoDatabase\n    setUsername(e.target.value)\n  }\n  const validateUserName = () => {\n    (warning || !username) ? alert('Wrong username! Try different one!') : showUsernamePanel(false)\n  }\n  const close_summary = () => {\n    showSummary(false)\n    clearUserScore()\n  }\n  const checkAnswer = async (answer) => {\n    const answerTimeEnd = moment()\n    const user_answer = answer === random_game.name\n        ? {\n            title: random_game.name,\n            time: answerTimeEnd.diff(answerTimeStart),\n            score: Number((1000/answerTimeEnd.diff(answerTimeStart)*10000*((10-hintCounter)/10)).toFixed()),\n            correct: true,\n            hints_used: hintCounter,\n          }\n        : {\n            title: random_game.name,\n            time: answerTimeEnd.diff(answerTimeStart),\n            score: 0,\n            correct: false,\n            skip: answer === \"player_skipped_game\" ? true: false,\n            hints_used: hintCounter,\n          };\n    pushNewAnswer(user_answer)\n    loadNewQuestion()\n  }\n\n  useEffect(() => {\n    !game_status.isLoading && setAnswerTimeStart(moment())\n    !game_status.isStarted && quitGame()\n  }, [game_status])\n  useEffect(() => {\n    random_game && setHints(random_game.hints) \n  }, [random_game])\n  useEffect(() => {\n    if(difficulty) {\n      switchPopup(false)\n      startGame()\n      getNewDatabase()\n    }\n  },[difficulty])\n  useEffect(() => {\n    game_database.length === 120 && loadNewQuestion()\n  }, [game_database])\n\n  return (\n    <Fragment>\n      <Table top>    \n        {!game_status.isStarted ?\n          <Typography key={\"key0015\"} link onClick={() => startNewGame()}>start a new challenge</Typography>\n          : game_status.isLoading ?\n           <Typography key={'key0016'} link>loading</Typography>\n           : (\n            <Fragment>\n              {hintCounter < 3 && <Typography key={\"key0011\"} link onClick={() => getHint()}>get a hint</Typography>}\n              <Typography key={\"key0012\"} link onClick={() => checkAnswer(\"player_skipped_game\")}>skip</Typography>\n              <Typography key={\"key0013\"} link onClick={() => endGame()}>quit</Typography>\n            </Fragment>\n          )}\n      </Table>\n      <Table bottom>\n        {(game_status.isStarted && !game_status.isLoading && random_game.answers) ?\n        random_game.answers.map((answer, i) => (\n        <Typography key={\"key0021\"+i} answer onClick={(answer) => checkAnswer(answer.target.innerText)}>{answer}</Typography>))\n        : ``}\n      </Table>\n      <SC.Popup title=\"Hello gamergeek!\" switch_popup={popup} popupIsClosed={() => quitGame()}>\n          {usernamePanel ? (\n            <Fragment>\n              <SC.WelcomeText>Letâ€™s see how good you are! Starting from your name...</SC.WelcomeText>\n              <SC.TextInput type=\"text\" onChange={(e) => handleTyping(e)} />\n              <SC.TextInputHint visible={warning}>Wrong nickname</SC.TextInputHint>\n              <SC.PlayButton onClick={() => validateUserName()}>Let's Play!</SC.PlayButton>\n            </Fragment>\n          ) : (\n            <Fragment>\n              <SC.WelcomeText center>Set game difficulty...</SC.WelcomeText>\n              {game_difficulty.map((diff_lvl, i) => (\n                <SC.PlayButton key={\"key0011\" + i} onClick={() => setDifficulty(i+1)}>\n                  {diff_lvl}\n                </SC.PlayButton>\n              ))}\n            </Fragment>\n          )}\n      </SC.Popup>\n      <SC.Popup title=\"Summary\" switch_popup={summary} popupIsClosed={() => close_summary()}>\n        {(user_score.length > 0 && summary) && (\n          <div style={{display: \"flex\", width: \"95%\", padding: \"2rem 0\", justifyContent: \"space-between\"}}>\n            <div style={{width: \"50%\", margin: \"1rem\"}}>\n              <SC.WelcomeText>The Game</SC.WelcomeText>\n              <table>\n                <tr>\n                  <SC.TD>Correct answers:</SC.TD>\n                  <SC.TD>{user_score.filter(x => x.correct).length}</SC.TD>\n                </tr>\n                <tr>\n                  <SC.TD>Wrong answers:</SC.TD>\n                  <SC.TD>{user_score.filter(x => !x.correct).length}</SC.TD>\n                </tr>\n                <tr>\n                  <SC.TD>Skipped answers:</SC.TD>\n                  <SC.TD>{user_score.filter(x => x.skip).length}</SC.TD>\n                </tr>\n                <tr>\n                  <SC.TD>Hints used:</SC.TD>\n                  <SC.TD>{user_score.map(x => x = x.hints_used).reduce((acc,y) => acc + y)}</SC.TD>\n                </tr>\n                <tr>\n                  <SC.TD>Quickest response:</SC.TD>\n                  <SC.TD>{(user_score.map(x => x = x.time).sort((a,b) => a-b)[0])/1000 + \" sec\" }</SC.TD>\n                </tr>                \n                <tr>\n                  <SC.TD>Slowest response:</SC.TD>\n                  <SC.TD>{(user_score.map(x => x = x.time).sort((a,b) => a-b)[user_score.length-1])/1000 + \" sec\" }</SC.TD>\n                </tr>                \n                <tr>\n                  <SC.TD>Average time response:</SC.TD>\n                  <SC.TD>{((user_score.map(x => x = x.time).reduce((acc, x) => acc + x))/user_score.length/1000).toFixed(3) + \" sec\" }</SC.TD>\n                </tr>\n              </table>\n            </div>\n            <div style={{width: \"50%\", margin: \"1rem\", position: \"relative\"}}>\n              <SC.WelcomeText>Score:</SC.WelcomeText>\n              <SC.ScoreText>{user_score.map(score => score = score.score).reduce((acc,score) => acc + score).toLocaleString()} <span>points</span></SC.ScoreText>\n              <SC.PlayButton summary onClick={() => close_summary()}>Close</SC.PlayButton>\n            </div>\n          </div>\n        )}\n      </SC.Popup>\n    </Fragment>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}