{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getGameDetails } from \"../global/fetchGameDetails\";\nimport store from \"./store\";\nexport var START_GAME = \"START_GAME\";\nexport var RESUME_GAME = \"RESUME_GAME\";\nexport var END_GAME = \"END_GAME\";\nexport var SHOW_RANDOM_GAME = \"SHOW_RANDOM_GAME\";\nexport var NEW_ANSWER = \"NEW_ANSWER\";\nexport var CLEAR_USER_SCORE = \"CLEAR_USER_SCORE\";\nexport var START_LOADING = \"START_LOADING\";\nexport var SHOW_HINT = \"SHOW_HINT\";\nexport var NEW_GAME_DATABASE = \"NEW_GAME_DATABASE\";\nexport var REMOVE_ITEM = \"REMOVE_ITEM\";\nexport var SHOW_POPUP = \"SHOW_POPUP\";\nexport var SET_HINT_COUNTER = \"SET_HINT_COUNTER\";\nexport var startGame = function startGame() {\n  return {\n    type: START_GAME\n  };\n};\nexport var resumeGame = function resumeGame() {\n  return {\n    type: RESUME_GAME\n  };\n};\nexport var endGame = function endGame() {\n  return {\n    type: END_GAME\n  };\n};\nexport var showRandomGame = function showRandomGame(game) {\n  return {\n    type: SHOW_RANDOM_GAME,\n    game: game\n  };\n};\nexport var pushNewAnswer = function pushNewAnswer(answer) {\n  return {\n    type: NEW_ANSWER,\n    answer: answer\n  };\n};\nexport var startLoading = function startLoading() {\n  return {\n    type: START_LOADING\n  };\n};\nexport var showHint = function showHint(hint) {\n  return {\n    type: SHOW_HINT,\n    hint: hint\n  };\n};\nexport var clearUserScore = function clearUserScore() {\n  return {\n    type: CLEAR_USER_SCORE\n  };\n};\nexport var newGameDatabase = function newGameDatabase(database) {\n  return {\n    type: NEW_GAME_DATABASE,\n    database: database\n  };\n};\nexport var removeItemFromDatabase = function removeItemFromDatabase(index) {\n  return {\n    type: REMOVE_ITEM,\n    index: index\n  };\n};\nexport var showPopup = function showPopup(popup) {\n  return {\n    type: SHOW_POPUP,\n    popup: popup\n  };\n};\nexport var setHintCounter = function setHintCounter() {\n  return {\n    type: SET_HINT_COUNTER\n  };\n}; // export function loadNewQuestion() {\n//     return async function(dispatch) {\n//         const game_database = store.getState().game_database\n//         const randomIndex = Math.floor(Math.random() * game_database.length)\n//         if(game_database === 0) {\n//           dispatch(endGame()) \n//         } else {\n//             dispatch(showRandomGame(await getGameDetails(game_database[randomIndex])))\n//             dispatch(removeItemFromDatabase(randomIndex))\n//         }\n//     }\n// }\n\nexport function fetchNewGameDatabase(difficulty) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var database_array, page, i, apishot, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              database_array = [];\n              page = 0;\n              _context.t0 = difficulty;\n              _context.next = _context.t0 === 0 ? 5 : _context.t0 === 1 ? 7 : _context.t0 === 2 ? 9 : 11;\n              break;\n\n            case 5:\n              page = 1;\n              return _context.abrupt(\"break\", 12);\n\n            case 7:\n              page = 4;\n              return _context.abrupt(\"break\", 12);\n\n            case 9:\n              page = 7;\n              return _context.abrupt(\"break\", 12);\n\n            case 11:\n              return _context.abrupt(\"return\", []);\n\n            case 12:\n              i = 0;\n\n            case 13:\n              if (!(i < 3)) {\n                _context.next = 31;\n                break;\n              }\n\n              _context.prev = 14;\n              _context.next = 17;\n              return fetch(\"https://api.rawg.io/api/games?page=\".concat(page + i, \"&page_size=40\"));\n\n            case 17:\n              apishot = _context.sent;\n              _context.next = 20;\n              return apishot.json();\n\n            case 20:\n              data = _context.sent;\n              database_array.push(data.results.map(function (game) {\n                return game = game.id;\n              }));\n              _context.next = 28;\n              break;\n\n            case 24:\n              _context.prev = 24;\n              _context.t1 = _context[\"catch\"](14);\n              console.log(_context.t1);\n              return _context.abrupt(\"return\", []);\n\n            case 28:\n              i++;\n              _context.next = 13;\n              break;\n\n            case 31:\n              console.log('rgfg2');\n              _context.next = 34;\n              return dispatch(newGameDatabase(database_array.flat()));\n\n            case 34:\n              return _context.abrupt(\"return\", dispatch(loadNewQuestion()));\n\n            case 35:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[14, 24]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n} ///////////// COMBINE LOAD QUESTION AND FETCHNEWGAME DB\n\nexport function loadNewQuestion(difficulty) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var game_database, randomIndex;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              game_database = store.getState().game_database;\n              console.log('rgfg');\n              randomIndex = Math.floor(Math.random() * game_database.length);\n\n              if (!(game_database.length === 0)) {\n                _context2.next = 7;\n                break;\n              }\n\n              difficulty ? fetchNewGameDatabase(difficulty - 1) : dispatch(endGame());\n              _context2.next = 15;\n              break;\n\n            case 7:\n              _context2.t0 = dispatch;\n              _context2.t1 = showRandomGame;\n              _context2.next = 11;\n              return getGameDetails(game_database[randomIndex]);\n\n            case 11:\n              _context2.t2 = _context2.sent;\n              _context2.t3 = (0, _context2.t1)(_context2.t2);\n              (0, _context2.t0)(_context2.t3);\n              dispatch(removeItemFromDatabase(randomIndex));\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n}","map":{"version":3,"sources":["/home/cerassus/Websites/gamergeek-nextjs/redux/actions.js"],"names":["getGameDetails","store","START_GAME","RESUME_GAME","END_GAME","SHOW_RANDOM_GAME","NEW_ANSWER","CLEAR_USER_SCORE","START_LOADING","SHOW_HINT","NEW_GAME_DATABASE","REMOVE_ITEM","SHOW_POPUP","SET_HINT_COUNTER","startGame","type","resumeGame","endGame","showRandomGame","game","pushNewAnswer","answer","startLoading","showHint","hint","clearUserScore","newGameDatabase","database","removeItemFromDatabase","index","showPopup","popup","setHintCounter","fetchNewGameDatabase","difficulty","dispatch","database_array","page","i","fetch","apishot","json","data","push","results","map","id","console","log","flat","loadNewQuestion","game_database","getState","randomIndex","Math","floor","random","length"],"mappings":"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","sourcesContent":["import { getGameDetails } from \"../global/fetchGameDetails\"\nimport store  from \"./store\"\n\nexport const START_GAME = \"START_GAME\";\nexport const RESUME_GAME = \"RESUME_GAME\";\nexport const END_GAME = \"END_GAME\";\nexport const SHOW_RANDOM_GAME = \"SHOW_RANDOM_GAME\";\nexport const NEW_ANSWER = \"NEW_ANSWER\";\nexport const CLEAR_USER_SCORE = \"CLEAR_USER_SCORE\";\nexport const START_LOADING = \"START_LOADING\";\nexport const SHOW_HINT = \"SHOW_HINT\";\nexport const NEW_GAME_DATABASE = \"NEW_GAME_DATABASE\";\nexport const REMOVE_ITEM = \"REMOVE_ITEM\";\nexport const SHOW_POPUP = \"SHOW_POPUP\";\nexport const SET_HINT_COUNTER = \"SET_HINT_COUNTER\";\n\nexport const startGame = () => ({\n    type: START_GAME,\n})\n\nexport const resumeGame = () => ({\n    type: RESUME_GAME,\n})\n\nexport const endGame = () => ({\n    type: END_GAME,\n})\n\nexport const showRandomGame = (game) => ({\n    type: SHOW_RANDOM_GAME,\n    game,\n})\n\nexport const pushNewAnswer = (answer) => ({\n    type: NEW_ANSWER,\n    answer,\n})\n\nexport const startLoading = () => ({\n    type: START_LOADING,\n})\n\nexport const showHint = (hint) => ({\n    type: SHOW_HINT,\n    hint,\n})\n\nexport const clearUserScore = () => ({\n    type: CLEAR_USER_SCORE,\n})\n\nexport const newGameDatabase = (database) => ({\n    type: NEW_GAME_DATABASE,\n    database,\n})\n\nexport const removeItemFromDatabase = (index) => ({\n    type: REMOVE_ITEM,\n    index,\n})\n\nexport const showPopup = (popup) => ({\n    type: SHOW_POPUP,\n    popup,\n})\n\nexport const setHintCounter = () => ({\n    type: SET_HINT_COUNTER,\n})\n\n// export function loadNewQuestion() {\n//     return async function(dispatch) {\n//         const game_database = store.getState().game_database\n//         const randomIndex = Math.floor(Math.random() * game_database.length)\n//         if(game_database === 0) {\n//           dispatch(endGame()) \n//         } else {\n//             dispatch(showRandomGame(await getGameDetails(game_database[randomIndex])))\n//             dispatch(removeItemFromDatabase(randomIndex))\n//         }\n//     }\n// }\n\nexport function fetchNewGameDatabase(difficulty) {\n    return async function(dispatch) {\n        const database_array = []\n        let page = 0\n        switch(difficulty) {\n            case 0: {page = 1; break;}\n            case 1: {page = 4; break;}\n            case 2: {page = 7; break;}\n            default: return []\n        }\n        for(let i=0; i<3; i++) {\n            try {\n                const apishot = await fetch(`https://api.rawg.io/api/games?page=${page+i}&page_size=40`)\n                const data = await apishot.json()\n                database_array.push(data.results.map(game => game = game.id))\n            }\n            catch(error) {\n                console.log(error)\n                return []\n            }\n        }\n        console.log('rgfg2')\n        await dispatch(newGameDatabase(database_array.flat()))\n        return dispatch(loadNewQuestion())\n    }\n}\n\n\n///////////// COMBINE LOAD QUESTION AND FETCHNEWGAME DB\n\nexport function loadNewQuestion(difficulty) {\n    return async function(dispatch) {\n        const game_database = store.getState().game_database\n        console.log('rgfg')\n        const randomIndex = Math.floor(Math.random() * game_database.length)\n        if(game_database.length === 0) {\n            difficulty\n                ? fetchNewGameDatabase(difficulty-1)\n                : dispatch(endGame()) \n        } else {\n          dispatch(showRandomGame(await getGameDetails(game_database[randomIndex])))\n          dispatch(removeItemFromDatabase(randomIndex))\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}